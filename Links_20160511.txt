What is MVC
https://www.youtube.com/watch?v=Iwwznm9XSME
 http://youtu.be/miTM9rY3He0


* good to have properties that call methods to transform data to proper format
e.g. Name field like Rahul instead of RAHUL or rahul, First letter capitalized 






Learn AngularJS Step by Step:- https://goo.gl/WMhWbF
Learn Design Pattern in 8 hours:- https://goo.gl/Lqdn1S
Learn C# and .NET in 60 days :- https://goo.gl/iPIW8v 




https://www.youtube.com/watch?v=Iwwznm9XSME
MVC 4 comes with VS 2012
MVC 5 comes with VS 2013

ASP.net Framework
---------------------------------
ASP.net webform is a .net framework for web development
MVC uses ASP.net (internally) and it is a .net framework for web development

MVC is an architectural pattern that divides the program into Model-View-Controller

-Model supplies data
-View is the User Interface
-Controller is the coordinator between model and view and handle end user request


e.g. when end user send action named AddCustomer that belong to Customer Controller and use Customer model. The Controller process the request and generates the view for the request. Action invokes view(page) for the request.

Views engine could be .aspx or .cshtml

HomeController -> All controller must end with the word Controller

 WE can omit Model or View, if not required.

Controller has many templates e.g. Empty, read/write, EF, Web API controller....

For each controller there created a dedicated folder in view folder. View can have layout page (as master page). View can be created with or without using model. View must be inside the controller (view) folder or in shared folder.

Razor view file has extension .cshtml and all syntax start with @ sign.


* with each action, you can return any view by viewname. If the name of the view is same as the name of the controller, you dont need to pass the view name.

MVC URL can be like http://server/controller/action/{id}



Routing simplifies URL writing. We can have custom routing for resources by using routing mechanism in MVC. Also it make url user friendly and routing maps the url to actual resource (controller/action).
[RouteConfig.cs]
It has routes collection.

Routes.MapRoute(
name:"Default",
url:"{controller}/{action}/{id}"
defaults" new {controller="Home",action="Index" id=optional}
);



Always make the Default route as the last route, otherwise it is always invoked due to default nature and none other route are execute.



In the same way, we have IgnoreRoute that is used to prevent user from downloading the resource files 
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");


To set start page, you need to set the route for first page e.g. url="" to be set to some controller/action.

Custom URL will help in SEO as page name, metadata/content matches.



------------------------
1) We can pass data from controller to view or controller to controller
ViewData is used to pass data from controller to view.


ViewData["CurrentTime"]=Datetime.Now.Tostring();

In view you can use <% = ViewData["CurrentTime"]  %>

@Html.DisplayNameFor(model => model.CustomerName)
@Html.DisplayFor(model => model.CustomerName)


[Quick watch to view value of variables and debug.]


2) 
https://www.youtube.com/watch?v=0-UdqWy9lVc




(3) link
https://www.youtube.com/watch?v=0-UdqWy9lVc



4) https://www.youtube.com/watch?v=1dlxtHuRw34
Create a form and submit to the display page.

MVC view have job for collecting data and displaying data and does not contain any logic in page.


5)
to create strongly typed form and display form
https://www.youtube.com/watch?v=PAXFmUUTyJ0

HTML helper classes help us to create HTML tags and maximize the productivity. 
We can have data entry and display form strongly typed that makes data binding and reduce the effort.

HTML Element helpers

HTML.TextBoxFor()
HTML.TextAreaFor()
HTML.DropDownListFor()
HTML.CheckBoxFor()
HTML.RadioButtonFor()
HTML.ListBoxFor()
HTML.HiddenFor()
HTML.LabelFor()

Other helpers
HTML.EditorFor()
HTML.DisplayFor()
HTML.DisplayTextFor()
HTML.ValidationMessageFor()

HTML.BeginForm("action", "controller",FormMethod.Post/Get) - to start creating form

@HTML.Textbox("CustomerId")

<% HTML.TextBox("CustomerId")%>


and we can bind the textbox to the customer object like below. This form when post give customer object already created using form
<% HTML.TextBox("CustomerId", Model)%>
only object name is required with the overloaded function 

Helper help you to automate the control generation and help in strongly type views.


[HttpPost] attribute is used with action to denote it is form object.


 5th link
https://www.youtube.com/watch?v=PAXFmUUTyJ0


6)step
https://www.youtube.com/watch?v=FlIyHGQyCVU&spfreload=5

Unit testing for MVC application. MVC benefit is view is clean and better, view has no complication. second advantage is unit testing made easy

Unit testing was difficult with code behind pages as it tied to view andcontext and other dependencies.

In MVC, the controller class is basic .net class, so unit testing is easy.

VSTS unit test


Creating customer controller object and invoking the action
customerController obj= new CustomerController();
var varresult=obj.DisplayCustomer();
comparing the result by Assert.AreEqual("DisplayCustomer",VarResult.ViewName)



7th Step
------------------------
https://www.youtube.com/watch?v=oDcZ5Qm02JE

Routing concepts
Default Routing collection -  route.MapRoute(name,URL,mapping to class)
You can put string that becomes part of URL
localhost/view/Customer and set the mapping accordingly

8th Step
-------------------------------
https://www.youtube.com/watch?v=oJOiUtKqZG4
We can define the routes in global.asax.cs file with method 
public Static void RegisterRoute (routeCollection route)
{
routes.maproutes(...)
}

and on Application_Start()
we can do registration 
protected void Application_Start() 
{
AreaRegistration.Registerallareas();
RegisterRoutes(RouteTable.Routes);
}



Set default value and validate MVC routes

We can set the default value in mapping as id=0
Regular Expression or Regex is to do pattern matching.
Regex are expression that define pattern for validation.

with overloaded ObjectConstraint option
new {controller="Customer",action="DisplayCustomer",id=0}, new {id=@"\d{1,2}"})
or when to apply GET constraint
new {httpMethod= new HttpMethodConstraint("GET")});

Study Regular Expression and how to use it


9 Step
------------------------
https://www.youtube.com/watch?v=_323VsR-Th0

Discuss about outgoing/outbound URL in MVC Routes

Anchor tags are used to navigate from one page to another
But in MVC everything is controller/Action

Hyperlinks (filename) are replaced by action links or passing action to href
e.g.
<a href="ActionName">About Us</a></br>
<a href="ControllerName/ActionName">About Us</a></br>

or using HTML helper class
e.g.
<% Html.ActionLink("About Us","aboutus") %>
                  (text, actionname)


Next Session
-------------------------------------
https://www.youtube.com/watch?v=yq1N7zfZTBo
--> viewdata,viewbag,tempdata and session

1) ViewData share data from controller to view
To store data to view data
ViewData["txt"]="Ram"
Now to print use -    @ViewData["txt"]

2) ViewBag is a collection of ViewData. It simplifies the syntax of viewData. used to pass value from controller to view
[Dynamic Keyword of .net] to review

To store data to ViewBag
ViewBag.CurrentDateAndTime=Datetime.Now;

to print viewbag data
@ViewBag.CurrentDateAndTime

=> ViewBag and ViewData does not persist when we move from one controller to another. TempData is used for this

TempData - Used to pass value from one controller to another.
TempData["CurrentDateAndTime"]=DateTime.Now;

String str= TempData["CurrentDateAndTime"].ToString();


=> To persist data from view to controller use HTTP POST/GET/Textboxes /QueryString/Hidden Field



=> To Persist data everywhere use Session. Have global scope until user session is open

Session["CurrentDateAndTime"]=DateTime.Now;







--------------------------------------------------
when you want to return to different controller
Return RedirectToAction("SampleView1");
--------------------------------------------------






Another Video Series
--------------------------------------------
Part 1 of the MVC Series
--------------------------------------------------
https://www.youtube.com/watch?v=-pzwRwYlXMw&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v

later series
https://www.youtube.com/watch?v=duQ1Pvr-oW0
--------------------------------------------------

=>To get the version of MVC used to build the application
go to reference -> System.Web.MVC -> Properties -> Version

=>Programmatically get it by
Return typeof(Controller).Assembly.GetNamne.Version.ToString();

--------------------------------------------------
=> MVC controller is a normal class that inherit from Controller Class
To deploy use Run->inetmgr for opening IIS server
Publish and use local IIS web server in Project properties windows


--------------------------------------------------

=> In MVC, Urls are mapped to controller Action Methods. Function in a controller are generally called as Controller action method
Whereas in WebForms URL's are mapped to Physical files

MVC  -> Server/ProjectName/Controller/Action

if Action/Controller, not found it gets HTTPStatus Code 404, Resource not found

WebForm -> Server/ProjectName/Page.aspx
--------------------------------------------------

The URL is mapped to proper controller action method by routing. Routing is defined in the App_Start -> route.Config

Also the Application_Start method under the Global.asax file, register all the components including RouteConfig.RegisterRoutes(RouteTable.Routes);

Code at
--------
http://csharp-video-tutorials.blogspot.in/2013/04/controllers-in-mvc-application-part-4.html

--------------------------------------------------
In Mvc, you can pass the query string using URL?name=Ram
and inside code
use  Request.QueryString["name"];

Also you can pass the value as parameter and use it directly.

localhost/appname/controller/action/1/name=pragim

and use in code like
Controller function (string a, int b)

=>ASP.net MVC will automatically pass any query string or form post parameters name "name" to Index action method when it is invoked.
--------------------------------------------------
Trace enable can be done in MVC like webform.
In system.web under config file
<trace enabled="true" pageOutput="false"/>
it will return to a file trace.axd

--------------------------------------------------
Part -4
https://www.youtube.com/watch?v=duQ1Pvr-oW0&index=4&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v

Part -5
https://www.youtube.com/watch?v=N6srbKfNcV4&index=5&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v
-------------------------------------------------
Demo for printing List of country using list and view

ViewModel to pass data from controller to view.
ActionResult is return type of controller
ViewResult can be used for this purpose.

ViewBag uses dynamic properties to store values/list/objects.

-------------------------------------------------
Part -6
https://www.youtube.com/watch?v=KrdMO2akohE&index=6&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v
ViewData and ViewBag are use to pass data from controller to view. ViewData is a dictionary of objects that are stored and retrieved using string as keys.

ViewBag and ViewData does not provide compile time error checking. if you misspell, it will be known only at runtime. ViewBag properties are stored as name/value pairs in the ViewData dictionary.

To pass data from controller to view, its always a good practice to use strongly typed view models over ViewBag and ViewData. Strontly typed view model provide compile time error checking.


-------------------------------------------------

Part -7
https://www.youtube.com/watch?v=KYOMgtZ4k3w&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=7

Creating Employee model and generating the class object/data hardcoded into
controller method (without db access).

The controller responds to URL request, gets data from a model and hands it over to the view. The view then renders the data. Model can be entities or business objects. (? Why)

=>We can create strongly typed view and pass the model class to view


-------------------------------------------------
Part - 8
https://www.youtube.com/watch?v=Lrr66APUwBk&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=8
Data Access using Entity Framework


To do so install EF from NuGet Package

Add a class file EmployeeContext:DbContext

DbContext class is defined in System.Data.Entity

public class EmployeeContext:DbContext
{
	public DbSet<Employee> Employees {get;set;}
}


Then define Connection string for EF in web config file. The name of the connectionString must match with the name of the context class.

[Table("tblEmployee")]
 to map the database table to the business class that EF use.

To get data from the EF
EmployeeContext empcontext = new EmployeeContext();
Employee empl=empcontext.Employees.Single(emp=>emp.EmployeeId == id);

In global.asax in Application_Start
do write
Database.SetInitializer<MVDDemo.Models.EmployeeContext>(null);

This statement tell it does not require any database initialization strategy.


-------------------------------------------------
Part- 9
https://www.youtube.com/watch?v=It_X8Br2rmY&index=9&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&spfreload=5

Generating Hyperlinks and link pages to it.


Part-10
https://www.youtube.com/watch?v=oN1f2Vpc-wU&index=10&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v

Working with multiple tables/Views
-------------------------------
- To get data from multiple tables that has dependencies, map the properties of other table as list.
- To use Entity Framework to fetch data from database.
-HTML.ActionLink is used to generate hyperlinks. Use to pass parameter to another pages.
- In view to add reference -  @using MVCDemo.Models 
  @Model IEnumerable<Department> to accept list of departments as model in view






Part - 11
-----------
https://www.youtube.com/watch?v=lI20jBpb2wU&index=11&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v

Business objects as Model in MVC application. Business objects contain both the state(data) and behavior, that is logic specific to the business.

In MVC there are several conventions, e.g. controller must have controller in thier name and should implement IController Interface either directly or indeirectly. Views should be placed in a specific folder that MVC can find them.

But with models there is no strict rules. In Fact "Models" folder is optional and they can live anywhere. They even present in a separate folder.

Created the Business layer and done db operation using ADO.net and SQL stored procedure.

We can make strongly typed view and bind model to view.

Scaffold template as list/Create, automatically write the code for the view.



Part - 12
------------------------
https://www.youtube.com/watch?v=qpAe45xTEfQ&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=12
Creating a view to insert data using MVC

- To decorate the controller action method with http get attribute, that means this action/Resource respond to the GET request only.

- Used HTML helper class HTML.DropDownList to bind the gender data. It binds the data to the selectListItem.You can put optional text as well as "Select Gender".

This form has become the GET Request of the form. But when we post the webform, there is an error as resource not found as no POST attribute method present.



Part - 13
------------------------
https://www.youtube.com/watch?v=IAQ4u_JRk0E&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=13


FormCollection in MVC. To Post data of Form to be saved into database. Used Stored procedure

- Created business logic method "AddEmployee"
- Now create another Create action inside Employee controller with HttpPost attribute.

- With formCollection you can print all the key and values from the form posted. AllKey properties return all key, key has name of key and formCollection[key] to print values.

- Bind the business object employee with all the values of formcollection individually.

- RedirectToAction return to another controller/action

[HttpPost]
public ActionResult Create (FormCollection formcollection)
{

}


But form bigger form writing all the binding code is tedious task, model binder in MVC can do this task.


Part-14
----------------------------------------------------------
https://www.youtube.com/watch?v=OX69gRT7azs&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=14


-We can omit the FormCollection object.
-We can use parameters as well instead of FormCollection. Function take all the required data as function parameters. How data automatically mapped to the parameters as function parameters. Model Binder do this job. name properties of the html controls bind the data to the action method. Order of parameter in not relevant, name must be matched.
- That is not the permanent solution and problematic for binding object/dozens of properties.

Part-15
----------------------------------------------------------

- We can pass the employee object to the create method as parameter.
- We can check if any model validation error, before saving data

if (ModelState.IsValid)
{
---
}
else
return view();

We can get rid of passing the class object and use UpdateModel(employee) to bind the form data to the employee model.

->But we can not have 2 function with the same name/signature, as in the case of create function. To fix this
We can use ActionName("Create"). This will respond to the create action of the get  action.

- Also you can add the ActionName("create") in both the action and have different name of the action methiod -> Create_Get, Create_Post and then adding the actionName above the methods.

UpdateModel() function inspects all the httpRequest input such as posted Form data, QueryString, Cookies and Server variables and populate the employee object.

-> Difference between UpdateModel and tryUpdateModel

- With UpdateModel you may get intermittent error stating - Adding the specified count to the semaphore would cause it to exceed its maximum count. To fix either 
1) REstart IIS 
or 

2) Disable connection pooling in the connection string of the web.config file.

Part - 16
------------------------------------------------------------
https://www.youtube.com/watch?v=2WH9FiQLzTY&index=16&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v


Difference between updateModel and tryUpdateModel


==>Ctrl + K to format the code. ctrl+G to go to particular line.
- DateTime to be set as Nullable by adding DateTime?
- sp_helpText stored procedure name to get details of the stored procedure
- DateTime must be checked for DBNull before assigning it to the object properties.
- To make the properties required, add Required attribute to class properties
  Add a reference to the Entity framework and import system.ComponentModel.DataAnnotations
[Required]  -- attribute

- With this required, UpdateModel can not update the emnployee.

- In this case you can use tryUpdateModel, to see the behaviour. This get you the validation messages. Thats the difference between the UpdateModel or tryUpdateModel

==> UodateModel() throws an exception if validation fails whereas TryUpdateModel will nevger throws an exception. The similarity is, both the functions are used to update the Modelwith the Form values and perform the vfalidation. No mandatory to use these function and use other mechanism to bind the data.

=>Why do you need to explicitly invoke model binding?
If we want to limit on what can be bound, explicitly invoking model binding can be vary useful.



Part - 17
-------------------------------------------
https://www.youtube.com/watch?v=ItSA19x4RU0&index=17&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v

Editing a model in mvc (GET action)

-To format HTML, use ctrl +KD




Part 18 Updating data in mvc
-------------------------------------------
https://www.youtube.com/watch?v=_f4TCBcOdi0&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=18

Editing a model in mvc (POST action)
cmd.ExecuteNonQuery() - ADO.net command to execute 

ModelState has errors properties that we can use (for validation).
In Immediate window-
?ModelState["DateOfBirth"].errors[0]


Part 19 Unintended updates in mvc
-----------------------------------------------------

https://www.youtube.com/watch?v=kfBvS-VOZFw&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=19


It means making some of the field not editable. In view instead of EditorFor use
DisplayFor, but updating required name (as it is required)
Hiddenfor is used for ID field of the record.
Add another HiddenFor for field that you dont want to make editable.

But when you have implementation like this, it is possible to hack into the app and update the name field. This can be done by using Fiddler.






Part 20 Preventing unintended updates in mvc
--------------------------------------------------
https://www.youtube.com/watch?v=T__S4GmQsYs&index=20&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v



To prevent this kind of issue, Instead if employee object, pass the emp id only.

With model binding method UpdateModel, use overload that take included properties
UpdateModel(employee, new string[] {"ID","Gender","City","DateOfBirth"});

White list or black List for properties that can be binded, include and exclude list of parameters for UpdateModel.


Part 21 Including and excluding properties from model binding using bind attribute
--------------------------------------------------

https://www.youtube.com/watch?v=OSMVySNMu8A&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=21



Include and exclude using Bind Attribute with action method

public ActionResult Edit_Post([Bind(Include="ID, Gender, City, DateOfBirth")], Employee employee)


In this case, we dont need UpdateModel method to bind the data, as the object will be binded to the action method.

Also required to remove the attribute [Required] from the properties that need to be excluded.


How Properties binding works in MVC?


Part 22 Including and excluding properties from model binding using interfaces
-------------------------------------------------------------------------------
https://www.youtube.com/watch?v=6qq31WYQxrk&index=22&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v

It is using create an IEmployee
 interface that exclude the desired properties and the class inherit from the interface


Also the UpdateModel takes IEmployee.
UpdateModel<IEmployee>(employee);



Part 23 Why deleting database records using get request is bad
-----------------------------------------------------------------
https://www.youtube.com/watch?v=eau7pfJYpT4&index=23&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v

Delete issue GET request to the URL, and deletes the record

Deleting database record using GET request opens a security hole and it is not recommended by Microsoft. Just imagine what can happen if there is an image tag in the malicious email as shown below. The moment we open the email, the image tries to load and issues a GET request, which would delete the data.
<img src="http://localhost/MVCDemo/Employee/Delete/2" />

Also when search engines index your page, they issue a GET Request which would delete the data.

In general, GET request should be free of any side-effects, meaning it should not change the state. Deletes should always be performed using the POST request.



Part 24 Deleting database records using post request in mvc
------------------------------------------------------------------

https://www.youtube.com/watch?v=G4i3-87cavk&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=24


Delete link must be replaced by Delete button that fires post request for delete. this button must be inside html begin form helper



Part 25 Insert update delete in mvc using entity framework
-------------------------------------------------------------
https://www.youtube.com/watch?v=8f4P8U1a2TI&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=25

A) Creating edmx for application.
1) First add ADO.net Entity Data Model
2) Generate model from database, db first approach
3) Add new connection and specifiy server (local) and database name
4) Name the connection string and details. 
5) Select the tables/views/procedures to include into 
6) Namespeace for Model you can put to use in application

B) Add Controller and select template using scaffolding options
C) It auto-generate the controller and view codes for the application with option to list, create, edit, details, delete features.




Part 26 Customizing the auto-generated index view
-------------------------------------------------------------
https://www.youtube.com/watch?v=Y45YpWt4twM&list=PL6n9fhu94yhVm6S8I2xd6nYz2ZORd7X2v&index=26


-You can format the style and other formatting
- You can rename the properties name by using the MetaDataType implementation in partial class and property name can be prefixed with attribute [Display (Name = "Department Name"]

Library reference : System.ComponentModel.DataAnnotations


Part 27 Customizing the autogenerated create view
------------------------------------------------------------
https://www.youtube.com/watch?v=vIxx_B7a8VU

To make data annotation required, here we used the MetaDataType attribute in partial class and having another class that works as prototype for this class

Display attribute required to annotate properties with another words.


Part 28 Customizing the autogenerated edit view
-------------------------------------------------------------
https://www.youtube.com/watch?v=6D97XE-v5GI


Validation error can also be added dynamically, if string.isnullorEmpty(employee.name)

Then
ModelState.AddModelError("Name","The name field is required");
 


Part 29 Using data transfer object as the model in mvc
-----------------------------------------------------------
https://www.youtube.com/watch?v=v1B3R-kb9CU

display total number of employee per department. This is where data transfer object comes to play. Create separate class for displaying the total employee and create controller, fetch the data, and pass the model to the view.



Part 30 View engines in asp net mvc
---------------------------------------------------------------
https://www.youtube.com/watch?v=V6Ee03U3d7Y

Razor View and ASPX view
By convention, it uses the controller name view. To use the other view, you need to pass the view name alongwith  return view(viewname);
1) Difference between Razor and aspx view
Syntax difference is
 there, otherwise there is no major difference between botht he view. In aspx view engine, the server side script is wrapped between <% %>, whereas in RAZOR we use @. People prefer Razor view as it is easy to switch between HTML and code. Depending upon programming language you chosen, it has extension .CSHTML, .VBHTML, whereas aspx has extension of . aspx


You can have both Razor and ASPX view engine on the same application. During adding view you can select view engine.You can also use any 3rd party view engine with ASP.net MVC application, keeping extensibility in mind



Part 31 Using custom view engines with asp net mvc
------------------------------------------------------------
https://www.youtube.com/watch?v=WCIgQ6epTqs

There are several view engine apart from Razor or ASPX that can be installed from nuget package manager.e.g.

1) Spark  (spark.Web.MVC4)
2) NHaml
3) SharpDOM
4) Brail



Part 32 How does a controller find a view in mvc
---------------------------------------------------------
https://www.youtube.com/watch?v=X4IL0BXUMy4

MVC convention help to find the location and name of the view file.

By convention MVC looks for a view with the same name as that of the controller action method name in the following location
1) Views/Folder Name Matching controller Name
2) Views/Shared

View extension can be any of the following
.cshtml
.vbhtml
.aspx
.ascx

If you have all of the folowing files in the "Views/Employee" folder, then MVC picks up the aspx


Shared folder is used to store views shared between controller. Master and Layout pagesa are stored in "Shared" folder.

Return view is used to specify the specific view. Use the full path of the view to navigate to any view.




Part 33 Html helpers in mvc
-----------------------------------------------------
https://www.youtube.com/watch?v=MFLJkFs5UW4

HTML helper is a method that is used to render html content in a view. HTML helper are implemented as extension method.
To produce the HTML for a textbox with id="firstname"
 and name="firstname"
<input type="text" name="firstname" id="firstname"/>

Or we can use the "TextBox" html helper

@Html.TextBox("firstname")
There are several overloaded versions. To set the value along with the name
@Html.TextBox("firstname","John")

John is value passed to the textbox.

To set the HTML attributes, use the following overloaded version. Notice that, we are passing HTML attributes (style and title) as an anonymous type.

@Html.TextBox("firstname","John", 
	new
	{
	style="background-color:Red; color:White; font-weight:bold",
	title="Please Enter your Name"
	})
	
	here title act as tooltip for textbox.

You can also set the CSS class for the textbox
@Html.Textbox("firstname", "John", new {@class="redtextbox",@readonly="true"})


For Label you can use 
@Html.Label("firstname","First Name")

To generate a textbox to enter password, so that the input is masked
@Html.Password("Password")

To generate a multi-line textbox with 5 rows and 20 columns
@Html.TextArea("comments","",5,20, null)

To get a hidden textbox
@Html.hidden("id")

Hidden textbox is used to store id values. Id values are not displayed on the page to the end user, but we need them to update data when the form is posted to the server.


-> Custom HTML helper can be created 
-> It is not mandatory to use HTML helper, but using HTML helper can greatly reduce the amount of HTML that we can write in the view. Views should be as simple as possible. All the complicated logic ot generate a control can be encapsulated into the helper, to keep the view simple.




Part 34 Generating a dropdownlist control in mvc using HTML helpers
---------------------------------------------------------------------
https://www.youtube.com/watch?v=79aYSOcmpV8

A dropdownlist in MVC is a collection of SelectListItem objects. Depending upon the project requirement you may either hard code the values in code or retrieve them from the database.

Generating a dropdownlist using hard code values

DropDownList(string name, IEnumerable<SelectListItem> selectList, string optionLabel)

@Html.DropDownList("Departments", new List<SelectListItem>
{
new SelectListItem{Text="IT", Value="1", Selected=true},
new SelectListItem{Text="HR", Value="2"},
new SelectListItem{Text="Payroll", Value="3"}
}, "Select Department")



To generate the dropdownlist from database
1) Create EF context class
2) In the controller create db context object, select the department using Selectlist object and assign to viewBag to pass the value to view

In controller
SampleDbContext db = new SampleDbContext();
ViewBag.Departments= new SelectList(db.Departments,"Id","Name");
Return View();


In the View
@HTML.DropDownList("Department", "Select Department")



Part 35 How to set an item selected when an asp net mvc dropdownlist is loaded
---------------------------------------------------------------------
https://www.youtube.com/watch?v=ZUjOgrb4oHQ

SelectList has the overloaded constructor to pass the selected value.

This is something hardcoded and need to change when some other department has to be set as default.

Instead you can add column isSelected in database table and implement that one. Loop through the records and select the selected value from the records.




Part 36 Difference between Html TextBox and Html TextBoxFor
-------------------------------------------------------------------	
https://www.youtube.com/watch?v=peKEMGxz3hs

==>View can be strongly typed or normal view
For Strongly typed view, we can use Html.TextBoxFor variant of the HTML helper controls.

@Html.TextBoxFor(m=>m.CompanyName)

@Html.DropDownListFor(m=>m.Departments, new SelectList(Models.Departments, "Id", "Name", "Select Department")


For Normal view, we can use Html.TextBox variant


Html.TextBox and Html.DropDownList are not strongly typed and hence they does not require a strongly typed view. This means that we can hardcode whatever name we want. On the other hand, Html.TextBoxFor and Html.DropDownListFor are strongly typed and requires a strongly typed view, and the name is inferred from the lambdaexpression.

Strongly typed HTML helpers also provide compile time checking. Since, in real time, we mostly use strongly typed views, prefer to use Html.TextBoxFor and Html.DropDownListFor over their counterparts.

Both variants produce the same HTML-end result is same.

Strongly typed HTML helpers are added in MVC2.



Part 37 Generating a radio button list control in mvc using HTML helpers
-------------------------------------------------------------------------
https://www.youtube.com/watch?v=04RY04uKq2s


db.Departments.toList() - Return list of department where db is context class.

In view
@using (Html.BeginForm())
{

foreach(var department in Model.Department)
{
	@Html.RadioButtonFor(m=>m.SelectedDepatment, Department.Id) @department.Name
}

<input type="submit" value="Submit">
}

Implement HttpGet or HttpPost for Index action method of the Home Controller.


You can change the sequence of radio button by inserting <br/> inside loop.
You can also check the value from  the isSelected properties of the department table. (with radio button overload

@Html.RadioButtonFor(m=>m.SelectedDepatment, Department.Id, (department.IsSelected.HasValue && Department.IsSelected.Value)? new {@checked="checked"}:null) @Department Name



Part 38 CheckBoxList in asp net mvc
----------------------------------------------------------------------
https://www.youtube.com/watch?v=4KeoOPWshmw

To see - Diff between Editor template and Display Template
Html.EditorForModel is used with EditorTemplate that is containted inside the view/Controller Name Folder/EditorTemplates

You can select multiple city and display using this control.

Part 39 ListBox in asp net mvc
--------------------------------------------------------------
https://www.youtube.com/watch?v=pZSP8tTAK1w


Listbox allow selection of multiple options
ViewModel is specific to the view, basically view model is used to shuttle data from view to controller and from a controller to a vieic IEnumerable<SelectListItem> cities{get;set;}

Html.ListBoxFor control help to bind the list to Ienumerable cities.
To disable the scrollbar and set the number of items displayed without scrollbar, setting size attribute help this.



Part 40 Using displayname, displayformat, scaffoldcolumn attributes in asp net mvc application
--------------------------------------------------------------

https://www.youtube.com/watch?v=WuRKCWAL4uQ
[DiaplayAttribute(Name="FullName")]
[Diaplay(Name="FullName")]

These are used to set the display attributes to the properties of the class

[DisplayFormatAttribute(DataFormatString="{0:d}")]
[DisplayFormat(DataFormatString="{0:dd/MM/yyyy HH:mm:ss tt}")]
tt will say AM/PM

Capital HH means 24 hour notation
hh means 12 Hour notation

Similarly for missing value
[DisplayFormat(NullDisplayText=("Gender not specified")]


If you dont want to display a information, you can use scaffold attribute. This only works when you use @Html.DisplayForModel helper


[ScaffoldColumn(false)]
public int? Salary{get;set;}


@Html.DisplayForModel will go through each of the properties and render it.


Part 41 Using datatype and displaycolumn attributes in asp net mvc application
-------------------------------------------------------------------
https://www.youtube.com/watch?v=XirIE7N3-fk

Like email address to be displayed as hyperlink use DataType attribute
[DataType(DataType.EmailAddress)]
          DataType.Currency
          DataType. Url
          DataType.Date
          DataType.Time

- Globalization and localization setting using config    
- Display column attribute is useful, when a class has a property of complex type an dyou want to pick one property of this compelx object for display purpose.


[DisplayColumn(FullName)] in partial class


Part 42 Opening a page in new browser window in asp net mvc application
------------------------------------------------------------------
https://www.youtube.com/watch?v=2p7neX8nEXQ

@Html.displayForModel display all data of the model

To make open the URL properties in new windows, by creating DisplayTemplate-> Shared->view. create a view with url name, 

Inside the url file, you can specify the target attribute to _blank. the url option of DataType search for displayTemplate folder and view of same file.

It open all the links in new windows

When you have different template name as view , then you need to pass the value of 
view to [UIHint("NewWindows")]



Part 43 Hiddeninput and readonly attributes in mvc
-----------------------------------------------------

https://www.youtube.com/watch?v=eVlKYGSVbRo

Readonly is to make a property of class read only
HiddenInput is for making a property hidden.
You make make read only by removing the set accessor.



Part 44 Display and edit templated helpers in asp net mvc
-------------------------------------------------------------
https://www.youtube.com/watch?v=MSUbLMD_fmw


TEmplated helpers are introudced in MVC2. These built in templated helpers can be broadly classificed into 2 categories
1) display templates
2) Editor Templates

There are 3 display templated helpers
@Html.display("EmployeeData") - Used with a view that is not strongly typed. For example, if you have stored data in ViewData, then we can use this templated helper using the key that was used to store data in ViewData.

@Html.DisplayFor(model=>Model) - Used with strongly typed viuews. If your model has properties that return complex objects, then this templated helper is very useful.

@Html.DisplayForModel() - Used with strongly typed views. Walks through each property, in the model to display the object.

Along the same line, there are 3 Edit templated helpers
@Html.Editor("EmployeeData")
@Html.EditorFor(model=>model)
@html.EditorforModel()



MetaDataType attribute is applied to class to provide additional attributes to class properties.





When  not strongly typed and we pass the data to view using ViewData, still you can generate the view with data object
In controller

EmployeeContext context = new EmployeeContext();
Employee empl= context.Employees.Single(x=>x.id==id);
ViewData["EmployeeData"]=empl;

In view
@Html.Display("EmployeeData")



To associate metadata with model class properties, we use attributes. We can also use various data annotations attributes. These templated helpers use metadata associated wth the model to render the interface.

The built-in display and edit templated helpers can be very easily customized.


Part 45 Customize display and edit templates in asp net mvc
-----------------------------------------------------------------
https://www.youtube.com/watch?v=Y0JhoULu-zI


The built in DateTime editor template used by MVC simply display a textbox for editing dates, but in practical, date calender control used. So we need to customize the view using Jquery Calender.

There are following convention used by MVC to find the customized templates

1) The customized display templates must be in a sub folder that is named DisplayTemplates. Editor templates must be in a sub-folder that is named EditorTemplates.

2) These sub-folders can live in "Shared" folder or a specific views folder. If these folders are present in the Shared folder, then the templates are available for all the views. If they are in a specific view folder, then, they are available only for that set of views.

3) The name of the template must match the name of the type. For example as we are customizing DateTime template, the name of the template in this case has to be DateTime.ascx


->This demo show Jquery calender controls.


Part 46 Accessing model metadata from custom templated helpers
---------------------------------------------------------------
https://www.youtube.com/watch?v=ih_o2aolf4Q

To make format of the Date Editor template generic instead of hard coded. Fix the date format in class property by [DisplayFormat(DateFormatString="{0:dd/mm/yyyy}", ApplyFormatInEditMode=true)]

In view

@Html.Textbox("",Model.HasValue ? @ViewData.TemplateInfo.FormattedModelValue : "",  new {@class= "date"})




To access model metadata in templates, use @ViewDAta.modelMetadata.

For example to access the DisplayFormatString, use

@ViewData.ModelMetadata.DisplayFormatString

If you want to know the name of the containing class (i.e. the name class that contain the HireDate property) then use

@ViewDAta.ModelMetaData.ContainerType.ToString()

Using the ModelMetaData object, you can access all sorts of metadata.

@ViewData.ModelMetaData.AdditionalValues and lots more properties....





Part 47 Displaying images in asp net mvc
----------------------------------------------
https://www.youtube.com/watch?v=rct6LIyErUE

We will use photo and alternate text, if photo missing. (path based)


<img src="@Url.Content(@Model.photo)" alt="@Model.AlternateText"/>

URL helper take the relative path of the resource and resolve that path.

Views need to be as simple as possible. Any complicated code must be moved to Helpers. We can define custom HTML helper

=> How to build custom HTML helper?

Part 48 Custom html helpers in mvc
----------------------------------------------------------------
https://www.youtube.com/watch?v=2mACi5D739g
- This is required to reduce complexity at view level and put all the codes into html helper for view
-extension method of Html helper class
==>-Extension method has to be static and reside in static class
- This example helps to create a custom helper for image display


Part 49 Html encoding in asp net mvc
-----------------------------------------------------
https://www.youtube.com/watch?v=IiAfCLWpgII


Html encoding is the process of replacing ASCII characters with their 'HTML Entity' equivalents. For example

ASCII Character	 -	HTML Encoded
<			&lt;
>			&gt;
&			&amp
SingleQuote		&#039;
DoubleQuote		&quot

Why should you html encode?
To avoid cross site scripting attack, all output is automatically html encoded in MVC.

=> To reviw Cross Site Scripting attack

To avoid HTML encoding where we dont want automatic HTML encoding (that deface the tags)

Technique	Razor	ASPX
IHTML String	Yes	Yes
HTML
.Raw()	Yes	Yes
<% %>		No	Yes


<%: %> this is used to HTML encode when you generate view from scaffolding.

The string of type IHTMLString are excluded from automatic html encoding.
Use return type as IHTMLString and retun the text wrapped inside MVCHTMLString(string)




Part 50 Detect errors in views at compile time
---------------------------------------------------------
https://www.youtube.com/watch?v=rAuxCzyz2l4


Compile time error checking in MVC view is disabled by default.

If  you want to enable compile time error checking for views in MVC

1) Open the project file under MVC
2) Serach for MVCBuildView tag under project tag set to true to allow view compilation.
<MvcBuildViews>true</MvcBuildViews>

3) Save the changes

Please note : Pre-compiling views is different from compile time error checking.


Part 51 Advantages of using strongly typed views
-----------------------------------------------------------
https://www.youtube.com/watch?v=xRinkoUpEEM


There are several way available to pass data from a controller to a view in an mvc application
1) ViewData or ViewBag
2) Dynamictype
3) Strongly typed view

Advantages of using strongly typed views
1) Intellisense
2) compile time error checking
With ViewBag and Dynamictype, we dont have these advantages.





Part 52 Partial views in mvc
-------------------------------------------------------------
https://www.youtube.com/watch?v=SABg7RyjX-4

If you are an asp.net webforms developer, then you will realize that partial views in MVC are similar to user controls in asp.net webforms. Partial Views are used to encapsulate reusable view logic and are a great means to simplify the compelxity of views. These partial views can then be used on multiple views, where we need sililar view logic.

File extension for partial view depends on ViewEngine and programming language.

with aspx view 
c# - .ascx
VB - .ascx

with razor .cshtml or .vbhtml

Partial view can reside in shared folder or in a specific view folder.

@Html.Partial("_Employee", Item)

and RenderPartial is used to display partial views.


Part 53 Difference between html.partial and html.renderpartial
https://www.youtube.com/watch?v=0fYzD-SUW0I

Both of these helper methods are used for rendering partial views. The following are the differences .

1) The return type of "RenderPartial" is void whereas "Partial" returns "MVCHtmlString"
2)Syntax for invoking Partial() and RenderPartial() methods in Razor view
@Html.Partial("PartialViewName")	{Html.RenderPartial("_Employee", item);}

3) Syntax for invoking Partial() and RenderPartial() methods in webforms views
<%: Html.Partial("PartialViewName")%>   <% Html.RenderPartial ("PartialViewName");)%>

When would you use Partial() over RenderPartial() and vice versa?

Then main difference is that "RenderPartial()"
 returns void and the output will be written directly to the output stream, whereas  the "Partial" method returns MvcHtmlString, which can be assigned to a variable and manipulate it if required. So, when there is a need to assign the output to a variable for manupulating it, then use Partial(), else use RenderPartial().

Which one is beter for performance
From the performance perspective, rendering direclty to the output stream is better. RenderPartial() does exactly the same thing and is better for performance over Partial().


Part 54 T4 templates in asp net mvc
---------------------------------------------------
https://www.youtube.com/watch?v=YIr18d5wBXM

T4 stand for text template transformation toolkit used by VS to generate code when you add a view or controller. You can find in VS folder this files with name 

C:/ProgramFiles/VS10/common7/IDE/ItemTemplate/CSharp/Web/MVC4/codeTemplate


You can make changes in the .tt files

If we want to customize T4 Templates, only for a specific project, then copy "CodeTemplates" folder and paste it in the root directory of the MVC project. Right click on the template files (with .tt extension) and select properties and delete "TextTemplatingFileGenerator"

By deleting this from customTool property, we are telling VS not to run them during the build. They will be manually called when we add a view or a controller using "Add View" and "Add Controller" dialog box.


You can copy inside the project main folder and make changes locally to reflect to the one project only.


Part 55 What is cross site scripting attack

----------------------------------------------------
https://www.youtube.com/watch?v=skHBmnPqvUo

Cross site scripting attack also called as XSS attack, is a security vulnerability found in Web application. XSS allows hackers to inject client-side script into web pages, and later, if the web page is viewed by others, the stored script gets exdecuted. The consequences of XSS may range from a pretty nuisance like displaying an alert() box to a significant security risk, like stealing session cookies.

.net mechanism disallows the user to prevent submitting any script or malicious code. If we want to block this check 
[ValidateInput(false)]


By default, all html code is encoded to prevent cross site scripting.

@Html.Raw(item.comments)

to print HTML.

By default asp.net encodes all html. This is one of the security measure in place, to prevent XSS attack. to disable html encoding

@Html.DisplayFor(modelUtem=> item.Comments)   ->  @Html.Raw(item.Comments)

Two important security measures in place to prevent XSS
1) All user input is validated - But we have disabled this using ValidateInput(false)
2) All HTML output is encoded - disabled using Html.Raw

Now the application is susceptible to XSS attack




Part 56 How to prevent cross site scripting attack
-----------------------------------------------------------
https://www.youtube.com/watch?v=hU0j4HM1cmM


We can prevent XSS attack while allowing only the HTML that we want to accept. For example, we only want to accept <b> and <u> tags.


1) Disable input validation, so that user can submit html

[HttpPost]
[ValidateInput(false)]
public ActionResult Create(Comment comment)

2) Dynamically encode all the input that is coming from the user

StringBuilder sbComments = new StringBuilder();
sbComments.Append(HttpUtility.HtmlEncode(comment.Comments));

3) Finally selectively replace, the encoded html with the HTML elements that we want to allow.

sbComments.Replace("&lt;b&gt;", "<b>");
sbComments.Replace("&lt;/b&gt;", "</b>");
comments.Comments = sbComments.ToString();

string strEncodeName= HttpUtility.HtmlEncode(comment.Name);
comment.Name= strEncodedName;

=> Relying on just filtering the user input, can not guarantee XSS elimination. XSS can happen in different ways and forms. MSDN documentation on XSS and its counter measures.


Part 57 Razor views in mvc
-------------------------------------------
https://www.youtube.com/watch?v=PRLGP_S9_K8


Use @ symbol to switch between C# code and html
@for (int i=1;i<10; i++)
{
	<b>@i</b>
}

Use @{} to define a code block. If we want to define some variables and perform calculation, then use case block.

Use <text>
 element or @: to switch between C# code and literal text

<text>  - Even  </text>

@:  - Even


Part 58 Razor views in mvc continued
--------------------------------------------------
https://www.youtube.com/watch?v=dXw5C7mlfqs

To comment something use @*  *@  - Multiline

Keyboard shortcut
comment ctrl+K & ctrl+C
UnComment ctrl+K & ctrl+U



@ symbold is used as code delimiter in razor views. However, razor is smart enough to recoginize the format of internet email address and not to treat the @ symbol as a code delimiter.

You can also use @ symbol as escape @

@@Office will print @office


Part 59 Layout view in mvc
--------------------------------------------------
https://www.youtube.com/watch?v=VyQhEArGTNs

What is the advantage of using _Layout.cshtml view?
Layout views provide the advantage of maintaining consistent look and feel across all views in an mvc application . A typical layout view consist of

Website Header
Menus
View Specific Content
Website Footer

Rather than having all of these sections, in each and every view, we can define them in a layout view and then inherit that look and feel in all the views.

With layout views, maintaining the consistent look and feel acroass all the views becomes much easier, as we have only one layout file to modify, should there be any change. The change will then be immdediately reflected across all the views in entire application.


-View specific title is retrieve using @ViewBag.Title
-View specific content will be plugged-in, where RenderBody() function is called.
  @RenderBody()

-All JS/CSS files are required to be referenced in layout page only.

Alt +0169 to print (c)





Part 60 ViewStart in asp net mvc
--------------------------------------------------
https://www.youtube.com/watch?v=MxU_ugIxnTA

->WE can associate a view with a layout file, we have to set Layout property of each and every view. This violates DRY (Don't Repeat Yourself) principle, and has the following disadvantages

1. Redundant code
2. Maintanance overhead. To use a different layout file, all the views need to be updated.

->What is _ViewStart.cshmtl file?

ASP.net MVC3, has introduced _ViewStart.cshtml. Specify the Layout property in this file and place it in the Views folder. All the views will then use the layout file that is specified in _ViewStart.cshtml. This elimitates the need to specify Layout property on each and every view, making them more clearner and maintainable.

->If you want a set of views in a specific folder, to use a different layout fule, then you can include another _ViewStart.cshtml file in that specific folder.

->When I use _ViewStart.cshtml file, can I still set Layout property on individual views?

Yes, if you want to use a layout file that is different from what is specified in _ViewStart.cshtml.


->Where else can I specify a layout file?
Layout file can also be specified in a controller action method or in an action filter.

public ActionResult Create()
{
	return View("Create", "_Layout")
}
Can we write some logic in "_ViewStart.cshtml"

 to dynamically specify which layout file to use?
Yes, the following code will change the layout file to use based on the browser type.

If the browser is google chrom,
then "_Layout.cshtml" layout file to use
Else
"_DifferentLayout.cshtml" layout file is used

@{
Layout= Request.Browser.IsBrowser("Chrome")? "~/Views/Shared/_Layout.cshtml" :
"~/Views/Shared/_DifferentLayout.cshtml"
}
}


All partial views in application are now using the layout file specified in "_ViewStart.cshtml". How do I prevent these partial views from using a layout file?

Details action method below return "_Employee" partial view, and is using the layout file specified in "_ViewStart.cshtml"

public ActionResult Details(int id)
{
Employee employee = db.Employees.Single(e=>e.Id==id);
return view("_Employee",employee);

To prevent this partial view from using the layout file, specified in "_ViewStart.cshtml", return "PartialViewResult" from the controller action method.

public PartialViewResult Details(int id)
{
Employee employee= db.Employees.Single(e=>e.Id==id);
return PartialView("_Employee",employee);
}

What will be the layout file extension, if VB.net is my programming language?
.vbhtml



Part 61 Named sections in layout files in mvc
--------------------------------------------------
https://www.youtube.com/watch?v=1KM1PE76MBg

ActionViewResult
PartialViewResult

All views (Index, create, Edit, Details and Delete), we see the same navigation menu.

We want to change the navigation menu dynamically. For Example, If I am on a Edit view, then I want the navigation menu to contain links for List, Details and Delete views.

To define a section inside specific view, use

@Section Menu
{
@Html.ACtionLink("List","Index")</br>
@Html.ACtionLink("Details","Details", new {id=Model.id})</br>
@Html.ACtionLink("Delete","Delete", new {id=Model.id})</br>
}

But where to render 

this section, go to the td where menu section display
In _Layout View
@RenderSection(sectionName)

You can mention a section required or not required (false)

you check if a view define that section

@if(IsSlectionDefined("Menu"))
{
@RemderSection("Menu",false)
}
else
{
@Html.ActionLink("Employee List","Index")
}




Part 62 Implementing search functionality in asp net mvc  (Important to review demo)
---------------------------------------------------------------
https://www.youtube.com/watch?v=Slw-gs2vcWo


When we dont want to change the state of the data, use GET method.
FormMethod.Get

To check rows in model

@if (model.count()==0)
{

}



Part 63 Implement paging in asp net mvc  (Important to review demo)
---------------------------------------------------
https://www.youtube.com/watch?v=srN56uxw76s

1) The first stelp is to install pagedlist.Mvc using NuGet package manager
PagedList
PagedList.MVC

2) Modify the index() action method to include a parameter to pass page number and return a PagedList.

In controller, along with the data query
(......................  .Tolist().toPagedList(page??1,3));
Here 3 is page size and 1 is start index for page

Now we are return paged list show model changed to IPagedList<MVCDemo.Models.Employee> in view

and printing model becomes
model=>model.First.Name();

Add reference to (in view)
@using PagedList
@using PagedList.Mvc


3) finally display page number for paging using PagedListPager helper
@Html.PagedListPager(Model, page=>Url.Action("Index", new {page}))

This generates 3 pages


The below code will retain the search parameter when search result is produced.

@Html.PagedListPager(Model, page=>Url.Action("Index", new
{page,
	searchBy=Request.QueryString["searchBy"],
	search=Request.QueryString["search"]
}))



PagedListRenderOption objects specify several display parameter

Current page and total number of pages to display using PagedListRenderOption

DisplayPageCountAndCurrentLocation

Total number of rows - DisplayItemSliceAndTotal



Part 64 Implement sorting in asp net mvc   
----------------------------------------------
https://www.youtube.com/watch?v=xD-33-6GLYo

We want to support bi-directional sorting by Name and Gender columns. Here's the requirement

1) Name and Gender columns must be clickable hyperlinks

2) Clicking on the column headers should sort the data. If the data is not already sorted by the column on which you have clicked, the data should be sorted in ascending order. Clicking again on the same column should sort the data in descending order.

3) By default, the data should be sorted by "Name" in ascending order.


ViewBag.SortNameParameter = string.IsNullOrEmpty(sortBy)? "Name desc": "";
ViewBga.SortGenderParameter= sortBy=="Gender" ? "Gender desc" : "Gender";

var employee = db.Employees.AsQueryable();

To use Where method, we need the data as IQueryable

%20 == Space in HTML






Part 65 Deleting multiple rows in mvc
------------------------------------------------------
https://www.youtube.com/watch?v=8LKFZDeoJT0

Having checkbox infront of rows that allow selecting multiple checboxes and delete the record.


Part 66 Check uncheck all checkboxes with another single checkbox using jquery
--------------------------------------------------------------------
https://www.youtube.com/watch?v=I0-VMKCDOHQ


Jquery example for select all, unselect all, count selected, confirm box to delete.works well with table data and header checkbox.




Part 67 Action selectors in mvc
---------------------------------------------------------------------
https://www.youtube.com/watch?v=lGoJtvAp5M8


An action is a public method inside a controller. These action method respond to URL request. Here localhost is name of the server, MVCDemo is name of the project, Home is the name of the controller and index is the name of the method.

Action Selectors are attributes that can be applied to an action method in a controller and are used to control or influence which action method gets invoked.

ActionName Selector: this action selector is used when you want to invoke an action method with a different name, than what is already given to the action method.

/Home/Index will invoke
public class HomeController : Controller
{
	public string Index()
	{
		return "Index action method invoked";
	}
}


/Home/List will invoke
public class HomeController : Controller
{
	[ActionName("List")]
	public string Index()
	{
		return "Index action method invoked";
	}
}

Once you decorate then you need to use the actionName to invoke. Can not name as index as similar to action method name.


[HttpPost] is example of action selector

AcceptVerbs selector : Use this selector, when you want to control, the invocation of an action method based on the request type.
[AcceptVerbs(HttpVerbs.Get)]
[AcceptVerbs(HttpVerbs.Post)]
or its shortcut as
[HttpGet]
[HttpPost]

....

The default is GET. So, if you don't decorate an action method with any accept verb, then, by default, the method responds to GET request.




Part 68 What is the use of NonAction attribute in mvc
----------------------------------------------------------------
https://www.youtube.com/watch?v=ipyLkt4gKG8

What is the use of NonAction attribute in MVC
Or 
How do you restrict access to public method in a controller

By Default all public method inside the controller respond to a URL request. But to prevent a public method from accessing through URL use, [NonAction] attribute.

An action method is a public method in a controller that can be invoked using a URL.

So, by, Default, if you have any public method in a controller then it can be invoked using a URL request. To restrict access to public methods in a controller, NonAction Attribute can be used.


Another way to restrict access to methods in a controller, is by making them private.

In general, its a bad design to have a public method in a controller that is not an action method. If you have any such method for performing business calculations, it should be somewhere in the model and not in the controller.

However, if for some reasons, if you want to have 
public methods in a controller and you don't want to to treat them as actions, then use NonAction attribute.


Part 69 Action filters in mvc
-----------------------------------------------------------------------------
https://www.youtube.com/watch?v=U544K1HL560

->What are the action filters in asp.net MVC?
Action Filters are attributes that can be applied either on a controller action method or on a controller. When applied at the controller level, they are applicable for all actions within that controller. aCtion filters allow us to add, pre and post processing logic to an action method. This means, they allow us to modify the way in which an action is executed.

->Name of  few commonly used action filters?
Authorize
ChildActionOnly
HandleError
OutputCache
RequireHttps
ValidateInput		e.g. [ValidateInput(false)]
ValidateAntiForgeryToken

->Can you create a custom action filter in MVC?
Yes, we can do it.



Part 70 Authorize and AllowAnonymous action filters in mvc
----------------------------------------------------------------
https://www.youtube.com/watch?v=ColwQX-dRJY

Authorize Attribute:
In ASP.net MVC, by default, all the controller action methods are accessible to both annonymous and authenticated users. If you want action methods, to be available only for authenticated and authorized users, then use [Authorize] attribute.


AllowAnonymous Attribute:
AllowAnonymous attribute is used to skip authorization enforced by Authorize attribute.

These attributes can be applied to action method level or controller level or globally.

Under IIS-> Authentication, you can allow anonymous and windows authentication.





Part 71 childactiononly attribute in mvc
----------------------------------------------
https://www.youtube.com/watch?v=OmLnOOCy6_U


You can pass an action to view of another controller using
@Html.Action("Countries", new { countryNames= new List<string>(){"Us", "UK","India"}})

[NonAction] attributed action method can not be called like above.

The solution is to use [ChildActionMethod]


Any action method that is decorated with [ChildActionOnly] attribute is a child action method.

Child action methods will not respond to URL requests. If an attempt is made, a runtime error will be thrown stating-Child action is accessible only by a child request.

Child action methods can be invoked by making child request from a view using "Action()" and "RenderAction()" html helpers.

RenderAction adds directly to the output stream and return void.

To invoke this method inside view
@{
Html.RenderAction("Countries", new {countryNames= new List<string>() {"US", "UK"}});
}


Mandatory to put ; at end.



An action method does not need to havef [ChildActionOnly] attribute to be used as a child action, but use this attribute to prevent if you want to prevent the action method from being invoked as a result of a user request.

Child actions are typically associated with partial views, but this is not compulsory.

Child action methods are different from NonAction methods, in that NonAction methods cannot be invoked using Action() or RenderAction() helpers.

Using child action methods, it is possible to cache portion of a view. This is main advantage of child action methods.
Topic - [OutputCache]





Part 72 HandleError attribute in mvc
----------------------------------------------
https://www.youtube.com/watch?v=nNEjXCSnw6w

HandleErrorAttribute is used to display friendly error pages when there is an unhandled exception. This can be applied at controller, method or global level.

To enable custom error pages in MVC.
1) Turn on CustomErrors in Web.Config. 
<customErrors mode="On">
</customErrors>

Modes are on|off|remote

Under <System.web> section

2) Add Error.cshtml view to the "Shared" folder

We did not apply HandleError attribute anywhere. So hopw did all this work?

HandleErrorAttribute is added to the GlobalFilters collection in global.asax. When a filter is added to the GlobalFilters collection, then it is applicable for all controllers and their action methods in the entire application.

protected void Application_Start()
{

...
FilterConfig.RegisterGlobalFilters(globalFilters.Filters);

}



Is the friendly error page displayed for HTTP status code 404?
No, by default.

1. Add "ErrorController" to controllers folder
public class ErrorController : Controller
{
	public ActionResult NotFound()
	{
		return View();
	}
}

2) Add NotFound.cshmtl view to the "Shared" folder
3) Change "customErrors" element in web.config as shown below

<customErrors mode="On">
	<error statusCode="404" redirect="~/Error/NotFound"/>
</customErrors>


Part 73 OutputCache attribute in mvc
-------------------------------------------------------------
https://www.youtube.com/watch?v=DBzSh9nBEQQ


OutputCacheAttribute is used to cache the content returned by a controller action method, so that, the same content does not need to be generated each and every time the same controller action is invoked.


//The output of the Index() action method will be cached for 10 seconds
[OutputCache(Duration=10)]
public ActionResult Index()
{
	return view(db.Employees.ToList());
}

//Child actions can be used to implement partial caching (portion of a view),
//although not necessary. In this case, even if the childActionOnly attribute is //removed a portion of the view is cached as expected.

[ChildActionOnly]
[OutputCache(Duration=10)]
public string GetEmployeeCount()
{
	return "Employee Count = " + db.Employees.Count().ToString() +
		"@" + DateTime.Now.ToString();
}



Cached data is available soon to user. After cache expires data is refreshed again and




Part 74 CacheProfiles in mvc
-------------------------------------------------
https://www.youtube.com/watch?v=UHePB7iUBXQ

To cache the data returned by Index() action method, for 60 seconds, we should use [OutputCache] attribute.

[OutputCache(Duration=60)]

As OutputCache settings are specified in code, the following are the disadvantages
1) If you have to apply the same cache settings, to several methods, then the code needs to be duplicated.

2) Later, if we have to change these cache settings, then
 we need to change them at several places. Maintaining the code becomes complicated. Also, changing the application code required build and re-deployment.

To overcome these disadvantages, cache settings can be specified in web.config file using cache profiles.

In <system.web>, we can provide the cache profile
<caching>
<outputCacheSettings>
<outputCacheProfiles>
	<add name="1MinuteCache" duration="60" varyByParam="none">
</outputCacheProfiles>
</outputCacheSettings>
</caching>


In the controller action method,use this as

[OutputCache(CacheProfile="1MinuteCache")]


The advantages of using cache profiles is that
1) Uou have one place to chagne the cache settings. Maintainability is much easier.
2) Since the changes are done in web.config, we need not build and redeploy the application.

Using Cache profiles with child action methods:

[ChildActionOnly]
[OutputCache(CacheProfile="1MinuteCache")]
public string GetEmployeeCount()
{
	return "Employee Count" + db.Employees.Count().ToString();
}


When Cache profiles are used with child action methods, you will get an error - Duration must be a positive number.

To make cache profiles work with child action methods, create a custom OutputCache attribute

[Codes...]


Use PartialCacheAttribute on the child action method, and pass it the name of the cache profile in web.config.


--> To read anything from the web.config file use the class WebconfigurationManager



Part 75 RequireHttps attribute in mvc
------------------------------------------------------------
https://www.youtube.com/watch?v=LJQmVaUseCk

[RequireHttps] attribute forces an unsecured HTTP request to be re-sent over HTTPS.

[RequireHttps]
public string Login()
{
	return "This method should be accessed only using HTTPS protocol";
}

RequireHttps attribute can be applied to a controller as well. In this case, it is applicable to all action methods with in that controller. Sensitive data such as login credentials, credit card information etc., must always be transmitted using HTTPS. Information transmitted over https is encrypted.

-> SSL Concepts - To review.


Part 76 ValidateInput attribute in mvc
---------------------------------------------
https://www.youtube.com/watch?v=tFHW6GEfCIE

ValidateInput attribute is used to enable or disable request validation. By default, request validation is enabled in ASP.net MVC and does not allow you to submit any HTML, to prevent XSS (Cross site scripting attacks).

[HttpPost]
//To Disable request validation
[ValidateInput(false)]
public string Index(string comments)
{
	return "Your Comment" + comments;
}



Part 77 Custom action filters in asp net mvc 
(Important)
--------------------------------------------------------------
https://www.youtube.com/watch?v=w-9tQQxnx1A

The custom action filer that we are going to build, should log the following information to a text file.
1) The name of the controller
2) The name of the action method
3) Execution time
4) If there is an exception, log the exception message and the time of the exception.

There are 4 types of filters in ASP.net MVC
1) Authorization filters - Implements IAuthorizationFilter. Example include AuthorizationAttribute and RequireHttpsAttribute. These filters run before any other filter.

2) Action filters - Implement IActionFilter

3) Result filters - Implement IResultFilter. Example include OutputCacheAttribute

4)Exception filters - Implment IExceptionFilter. Example include HandleErrorAttribute.


Custom action filter to log the action sequence and exception



Part 78 Different types of ActionResult in asp net mvc
------------------------------------------------------
https://www.youtube.com/watch?v=Wofodc6qfNE

There are different types of ActionResult that can be returned by an action method.

public ActionResult Index()
{
	return view();
}

This is typical signature of action method and by default it return the result of type "ActionResult". ActionResult is actually ab abstract class. There are various  derived class of ActionResult  e.g. JsonResult, EmptyResult, RedirectResult, ViewResult, PartialViewResult

-> ILSpy is a tool that can be used to inspect an assembly
   http://ilspy.net

Why do we have  so many sub-types?
An action method in a controller, can return a wide range of objects. For example, an action method can return

1) ViewResult
2) PartialViewResult
3) JsonResult
4) RedirectResult etc.

What should be the return type of an action method- ActionResult or specific derived type?
Its good practice to return specific sub-types, but if different paths of the action method returns different subtypes, then I would return an ActionResult object.

public ActionResult Index()
{ if (condition)
	return View();   //Return ViewResult object
  else
	return Json("Data"); // return JsonResult object
}



Part 79 Areas in asp net mvc
---------------------------------------------------------
https://www.youtube.com/watch?v=LStRA6qUAks

Areas in MVC
When you create a new asp.net MVC application, the following folders are created within the root directory.
1) Models
2) Views
3) Controllers

This structure is fine for simple applications, but when your application gets big and complex, maintaining your Models, Views and Controllers can get complicated. The structure of a complex asp.net MVC application can be very easily maintained using Areas.

It's common for a typical job portal to have  the following functional areas.

Employee Area- This functional area allow a job seeker to create their profile, upload resume, and perform a job search.

Employer Area - This functional area allows a job provider to create employer profile, upload jobs and search for suitable candidates.

Administrator Area - This functional area allows an administrator to configure the site and maintain.

Right click on the project and create an Area with "Name of Area", this create area folder and their required controller, model and views. 

Within each folder there is a file name AdminAreaRegistration.cs to register routes.

All route here start with Area name

But how all these areas get registered into project?
In Global.asax file you may find a statement
AreaRegistration.RegisterAllAreas();

- Need to use overloaded function of MapRoute to specify the namespaces to route to.

 namespaces: new string[]{"MVCDemo.Controller"}

-To fix optimization issue, install Nuget package from console

PM> Install-Package Microsoft.Web.Optimization -Pre

-> To create hyperlinks and refer different area controller/action
@Html.ActionLink("Main Area Home Page", "Index", "Home", new {area=""}, null);
@Html.ActionLink("Employee Area Home Page", "Index", "Home", new {area="Employee"}, null);


So, in short, areas are introduced in MVC 2, that allows us to breakdown a large complex application into a several small sections called areas.

Areas can have their own set of 
1) Models
2) Views
3) Controllers
4) Routes




Part 80 StringLength attribute in asp net mvc
------------------------------------------------

https://www.youtube.com/watch?v=tSzBNRAfpGY

StringLength attribute is present in System.ComponentModel.DataAnnotations
namespace and is used ot enforce minimum and maximum length of characters that are allowed in a data field.

[MetadataType(typeof(EmployeeMetaData))]
public partical class Employee
{
}

public class EmployeeMetaData
{
[StringLength(10, MinimumLength=5)]
[Required]
public string Name{get;set;}
}

Points to Remember:
1. [StringLength] attribute is present in the System.ComponentModel.DataAnnotations namespace
2. [StringLegth] attribute verifies that a string is of certain length, but does not enforce that the property is REQUIRED. If you want to enforce that the peroperty is required use [Required] attribute


[StringLength(10, MinimumLength=5)]
Here as part of named parameter you can specify your custom message as error message.This does not check for blank string, so Required attribute is needed.





Part 81 Range attribute in asp net mvc
-----------------------------------------------------------
https://www.youtube.com/watch?v=vM0H5Pj2nK8


Range attribute checks if the value of a data field is within a specified range of values.

[StringLength(10, MinimumLength=5)]
[Required]
[Range (1,100)]
[Range(typeof(DateTime), 01/01/2000, "01/01/2010")]
[DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode=true)]
public DateTime HireDate {get; set;}

When Range attribute is used with DateTime fields, the client side validation does not work as expected.




Part 82 Creating custom validation attribute in asp net mvc
-----------------------------------------------------------
https://www.youtube.com/watch?v=vcX8WW4fL1s

-We can not use DateTime.Now.ToShortDateString() as parameter to Range attribute for date validation, it throws an error.

-to solve this, you can create custom validation attribute




Part 83 RegularExpression attribute in asp net mvc
----------------------------------------------------------------
https://www.youtube.com/watch?v=7VXRVzC-WUQ

@ represent a liberal.

Regular expression attribute is great for pattern matching validation

Validation requirement for name property
1) Name can contain first and last name with a single space between them.
2. Last name is optional. If last name is not present, then there shouldn't be any space after the first name.
3. Only upper and lower case alphabets are allowed.


This validation requirement can be easily  met using RegularExpression attribute
[RegularExpression(@"^()[A-za-z]+[\s]{1}[A-za-z]+) |([A-Za-z)]+
))$")]
public string Name{get; set;}

->Review Regular Expression

http://gskinner.com/RegExr - to test and get list of expressions



Part 84 Compare attribute in asp net mvc
--------------------------------------------------
https://www.youtube.com/watch?v=A79Aj2xDyc8

Compare attribute is used to compare 2 properties of a model. Comparing email addresses and passwords is the common use case of Compare attribute.
To ensure that the user has typed the correct email, lets include "Confirm Email"
 field on the "Edit" view.


[MetadataType(typeof(EmployeeMetaData))]
public partial class Employee
{
[Compare("Email")]
public string ConfirmEmail{get;set;}
}
//This compare the 
public class EmployeeMetaData
...


Most of the validation attributes like Range, RegularExpression, StringLength etc. are present in
System.ComponentModel.DataAnnotations.

Compare attribute is in System.Web.Mvc.namespace

-> Confirm email/password fields are generated inside the partial class. not in autogenerated class or metadata class
.

-> Metadata class is only used to associate attribute with the properties of the entities.



Part 85 Enable client side validation in asp net mvc
--------------------------------------------------------
https://www.youtube.com/watch?v=PLe7WbsuHPU

Validation attributes in asp.net mvc provides both client and server side validation.

To enable client side validation

Step1: Enable ClientValidation and UnobtrusiveJavaScript in web.config file

<appSettings>
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings>
Step2: Include a reference to the following JavaScript
 files. In real-time, the references to the Javascript files are included in the master page. This avoids the need to reference them on each and every view where we need validation. The order in which the script files are referenced is also important.

<script src="~/Script/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="~/Script/jquery.validate.min.js" type="text/javascript"></script>
<script src="~/Script/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>

With these 2 changes, validation should now happen on the client without a round trip to the server. If the client disables javascript in the browser, then client side validation does not work, but server side validation will continue to work as normal.


Due to this reason, a form must have both client and server side validation.



Part 86 ValidationSummary in asp net mvc
(Important) 
----------------------------------------------------
https://www.youtube.com/watch?v=DhOvRZb8htU


-> Displaying all validation errors at one place using validation summary html helper.

The error display works like, display asterisk with each row and in red, at bottom all the error list. To achieve this, use

Step1: Add reference to Site.css stylesheet
<link href="~/Content/Site.css" rel="stylesheet" type="text/css">
Step
2: In site.css there are 3 CSS classes that control the display of validation errors. Adjust the stypes of these classes according to your needs
field-validation-errors
input.input-validation-error
validation-summary-errors

Step3: To display all errors at one place, use ValidationSummary() HTML helper.
@Html.ValidationSummary(false,"Please fix the following errors and then submit the form")

Step4: To display an asterisk symbol, modify ValidationMessageFor() html helper

@Html.ValidationMessageFor(model=>model.Name, "*")



Part 87 What is Unobtrusive JavaScript
--------------------------------------------------
https://www.youtube.com/watch?v=q_HuvkeEr6A

-->obstrusive (plain JS) vs unobstrusive (JQuery script) JavaScript code

What is Unobtrusive JavaScript?
Unobtrusive JavaScript, is a JavaScript that is separated from the website's html markup.

There are several benefits of using Unobtrusive JavaScript.
Separation of Concern e.g. the HTML mark-up is now clean without any traces of javascript. Page load time is faster.

It is also easy to update the code as all the Javascript logic is present in a separate file.

We also get, better cache support, as all our JavaScript is now present in a separate file, it can be cached and accessed much faster.


Part 88 Unobtrusive validation in asp net mvc
-----------------------------------------------------
https://www.youtube.com/watch?v=--0RUseW4lg

Unobtrusive Validation
To tun on client side validation and unobtrusive JavaScript for the entire application using Web.config
<appSettings>
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/>
</appSettings>

Is it possible to turn these featuers on/off using code?
Yes, the feature can be enabled or disabled in Application_Start() event handler in Global.asax
protected void Application_Start()
{
	HtmlHelper.ClientValidationEnabled=true;
	HtmlHelper.UnobtrusiveJavaScriptEnabled=true;
}


Is it possible to turn these feature on/off for a specific view?
Yes, include the following code, on a view where you want to enable/disable these features

@{
	HtmlHelper.ClientValidationEnabled(true);
	HtmlHelper.UnobtrusiveJavaScriptEnabled(true);
}


How is Unobtrusive validation implemented in ASP.net MVC?
Using "data" attributes. For example, if we use "Required" attribute, on Name property and if we enable client side validation and unobtrusive JavaScript, then the generated HTML for "Name" field is as shown below.

<input class="text-box single-line"
	data-val="true"
	data-val-required="The name field is required."
	id= "Name"
	name="Name"
	type="text"
	value="something"/>

 data-val="true", indicates that the unbtrusive validation is turned on for the element

data-val-required="The name field is required", indicate that the "Name" field is required and the associated error message will eb displayed if the validation fails.

These data field attribute is used by Jquery plug-ins to do data validation.
that is due to the web config setting Unobtrusive javascript enabled 



Part 89 Remote validation in asp net mvc
--------------------------------------------------
https://www.youtube.com/watch?v=Ll8VtDRj8L4

To check for duplicated record, we can use Remote Attribute.

Remote validation in ASP.net MVC
Sometimes, to check if the field value is valid, we may need to make a database call. A classic example of this is the user registration page. To register a user, we need a unique username. So, to check, if the username is not taken already, we have to make a call to the server and check the database table. RemoteAttribute is useful in situation like this.

When a user provides a username that already exists, the associated validation error message should be displayed immediately as shown below.


-Create a function to check IsUserNameAvailable(string UserName)
return !db.Users.Any(user=> user.UserName==UserName);
-Validation need to be done at client side, so return Json Result - JsonResult
using JsonRequestBehaviour.AllowGet
- this method need to hookup with class user.
- can not make any change to generated partial class user in EF
- Then add a class user.cs that is again a partial class
- there is one more class UserMetaData that contain the metadata for user class
- Metadata type attribute is present tin System.ComponentModel.DataAnnotations.
- Decorate the userName property with Remote method
  [Remote("IsUserNameAvailable","Home",ErrorMessage="USerName already in use")]
- Add script file to the view file of the method.
- Add CSS file to the view file.
- To make it work, the name of the parameter in remote method must match the field of the class in View.
- Also make sure in web config ClientSideValidation and UnobtrusiveJavaScriptEnabled is true.
-Remote attribute only work when JavaScript is turned on for the browser.

Part 90 Remote validation in mvc when javascript is disabled
----------------------------------------------------------------------
https://www.youtube.com/watch?v=9BMZkyukz0s

-Remote attribute only work when JavaScript is enabled for the browser.
If the end user disables JavaScript on his/her machine then the validation does not work. This is because RemoteAttribute requires JavaScript to makes an asynchronous  AJAX call to the server side validation method. As a result, the user will be able to submit the form, bypassing the validation in place. This is why it is always important to have server side validation.

To make server side validation work, when JavaScript is disabled, there are 2 ways
1) Add model validation error dynamically in the controller action method
2) Create Custom remote attribute and override IsValid method

Disable JavaScript in the browser and test the application. Notice that, we don't get client side validation, but when you submit the form, server side validation still prevents the user from submitting the form, if there are validation errors.

However, delegating the responsibility of performing validation, to a controller action method violates separation of concerns within MVC. Ideally all validation logic should be  in the Model. Using validation attributes in mvc models, should be the preferred method for validation.
-Creating  a custom attribute and overriding IsValid() method



In Post event of Create method
//Add Model Validation Error Dynamically
if (db.Users.Any(x=>x.UserName==user.UserName))
{
	ModelState.AddModelError("UserName", "UserNmae is already in use");
}

This method turns the ModelState.Isvalid to false

this violates the principal of Separation of concern - All validation logic must be in model.


Part 91 Create a custom remote attribute and override IsValid) method
--------------------------------------------------------------------------
https://www.youtube.com/watch?v=qopOqppDwc4


*Creating custom remote attribute
- Create a class file RemoteClientServerAttribute that inherit from RemoteAttribute (refer System.Web.Mvc, 
refer System.ComponentModel.DataAnnotations and System.Reflection
- Overwrite the IsValid method
- Reflection is used to get the name of the project and name of the controller.
 or assembly information

- get all controller in Type variable
- controller.GetMethods return all methods
- Store the method in MethodInfo class object
- This custom validation will be performed both at client side and server side
- This is a good practical example of using Reflection in real life project.



Part 92 Ajax with asp net mvc
------------------------------------------------------
https://www.youtube.com/watch?v=B59skvlroyc

ASP.net AJAX enables a Web application to retrieve data from the server asynchronously and  to update portions of the existing page. So these, partial page updates make web application more responsive and hence improves user experience.

@Ajax.ActionLink("All", "All", new AjaxOptions
	{
	HttpMethod = "GET",
	UpdateTargetId ="divStudents",
	InsertionMode= InsertionMode.Repalce  // can be ReplacAfter or Before
	})

JavaScript files required for AJAX to work
jquery-1.7.1.min.js
jquery.unbtrusive.ajax.min.js

Controller action method returns a PartialViewResult, as we need to update a portion of the page.

public PartialViewResult All()
{
	List<Student> model=db.Students.ToList();
	return PartialView("_Student",model)
}




Part 93 What is Ajax and why should we use it
----------------------------------------------
https://www.youtube.com/watch?v=9JJXZfVrBUs

What is AJAX?
AJAX stands for Asynchronous JavaScript And XML and enable web applications to retrieve data from the server asynchronously. Web application using AJAX enables partial page updates, i.e. only the related section of the page is updated, without reloading the entire page.

Advantages of AJAX
1) AJAX applications are non blocing. As AJAX request are asynchronous, the user doesn't have to wait for the request processing to complete. Even while the request is still being processed by the server, the application remains responsive and the user can interact with the application. When the request processing is complete, the user interface is automatically updated. This is not the case with synchronous requests. The user interface is blocked and the user can not do anything else until the request has completed processing.

2) Better performance and reduced network traffic. AJAX enables an application to send and receive only the data that is required. As a result, there is reduced traffic between the client and the server and better performance.

3) No Screen flicker. An AJAX response consists of only the data that is relevant to the request. As a result, only a portion of the page is updated avoiding full page refresh and screen flickers.

Diadvantages of AJAX
1) AJAX requests can not be bookmarked easily
2) AJAX relies on JavaScript. If JavaScript is disabled, AJAX application won't work
3) Harder to debug.
4) Search engine like Google, Bing, Yahoo etc cannot index AJAX pages.

Applications of AJAX
1) Many websites like Google, bing, youtube, yahoo use AJAX to implement AutoComplete feature
2) Gmail use AJAX to implement AutoSave feature
3) Gmail use AJAX to implement RemoteValidation i.e. to validate if a username is already in use, when creating a Gmail account.
4) Facebook use AJAX, to load data as you keep scrolling down.

AJAX is generally used to implement features like
1) AutoComplete
2) AutoSave
3) Remote Validation etc.



Part 94 Providing visual feedback using LoadingElementId AjaxOption
--------------------------------------------------------
https://www.youtube.com/watch?v=a5ysx-LWWOI

One problem with partial page updatesis that, they dont provide any visual feedback if the request is taking a long time to process. With full page postbacks, we dont have this problem, because the entire page is posted to the server and hence the user knows something is happening.

For example, lets say a request in our AJAX enabled application takes 10 seconds to complete. When the user clicks the bottim and if we don't provide him with any visual feedback that is request is being processed, the user may think the website is not working and he may click the button again. So, it is very important that we provide some visual feedback.

To provide visual feedback to the user, use LoadingElmentID AJAXOption

new AjaxOptions()
{
	HttpMethod= "GET",
	UpdateTargetId = "divStudents",
	InsertionMode= InsertionMode.Replace,
	LoadingElementId="divloading"
})

<div id="divloading" style="display:none;">
	<img src="~/Images/spinner.gif"/>
</div>

For animated spinner GIF image
http://spiffygif.com




Part 95 OnBegin, OnComplete, OnSuccess and OnFailure properties of AjaxOptions class-------------------------------------------------------------------------
https://www.youtube.com/watch?v=js4xqfaC2A8



Using the following 4 properties of the AjaxOptions class, we can associate JavaScript functions that get called on the client at different stages of an AJAX request/response cycle.

1) OnBegin - The associated JavaScript function is called before the action method is invoked

2) OnComplete - The associated JavaScript function is invoked after the response data has been instantiated but before the page is updated.


3) OnSuccess - The associated JavaScript function is invoked after the page is completed.

4) OnFailure - The associated JavaScript function is invoked if the page update fails.




Use OnBegin clear the div for result.
function ClearResult(){
$("#divStudents").Empty();
}



Part 96 LoadingElementDuration property of AjaxOptions class
------------------------------------------------------------------------
https://www.youtube.com/watch?v=ifg_yytUAng

LoadingElementDuration property is used to control the animation duration of LoadingElement.

The value for LoeadingElementDuration property must be specified in milliseconds.

By default, the LoadingElement fades in and fades out instead of appearing/disappearing instantly.

But I noticed, irrespective of whatever duration we set, the LoadingElement was fading in and out at the same speed.



Part 97 Implement autocomplete textbox functionality in mvc
------------------------------------------------------------------
https://www.youtube.com/watch?v=quQgUNteWxY

AutoComplete functionality using JQuery widget
1) First download autocomplete widget from jQueryUI.com
2) Move the .js file to the script folder and images and css files to Content folder
3) Add a script for autocomplete and pass required option to it e.g. source


$("#txtSearch").autocomplete({
source : '@Url.Action("GetStudents")',
minLength:2
})

source option takes the action to invoke
minLength is to define minimum text to invoke the search.




Action method to get list of names based on search text

public JsonResult GetStudents(string term)
{
	SampleDbContext db= new SampleDbcontext();
	List<string> students;

	students= db.Students.Where(x=>x.Name.StartWith(term))
		    .Select(y=> y.Name).ToList();

	return Json(students, JsonRequestBehavior.AllowGet);
}





Part 98 What is JavaScript minification
----------------------------------------------------------
https://www.youtube.com/watch?v=3nJ023SPjJc

What is JavaScript minification
JavaScript minification is the process of reducing the size of JavaScript file, by removing comments, extra whitespaces, new line characters and using shorter variable names.

What are the advantages of JavaScript minification?
As a minified JavaScript files are very small, they will be downloaded much faster and consumes less bandwidth. Search engine like Google consider page loading time as one of the parameters to rank the pages.

Is any of the functionality lost due to minification?
No, the functionality will be exactly the same as before.

Are there any tools avaialble to minify JavaScript?
There are lots of free tools available on the web. Just Google by using the "Minify JavaScript" search term.






- Create custom JavaScript file to check whether number is even or odd
- Now minify the JavaScript code using available tools
- Use jsCompressor.com
- Paste JS code and compress it
- Now create a new file using CustomJavaScript.min.js
- Now use this file 


What is the difference between jquery.js and jquery.min.js

jquery.min.js is the minified version, where as jquery.js is the non-minified version. In your production website always use minified files as they downlaod faster and consume less bandwidth.

What is the downside of JavaScript minification?
They are harder to read and debug. However, for deployment and debugging we can use non-minified versions. Just before deployment,  minify and use the minified versions on the production environment.


Part 99 What is CDN Content Delivery Network
---------------------------------------------------------
https://www.youtube.com/watch?v=MQt7w2jUmbw

CDN stands for Content Delivery Network. CDN is a network of computers that exist all over the world. For example, for a web application there are 2 ways we can make the jQuery library available.

1) Have a copy of the jQuery library on your web server and reference it.

2) Reference the JQuery library from a CDN.(google, Microsoft or JQuery)
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" 
          type="text/javascript">

Benefits of using a CDN
1) Caching benefits - If other web sites use jquery and if the user has already visited those websites first, jquery file is cached. If the user then visits your website, the cached jquery file is used without having the need to download it again.

2) Speed Benefits- The jquery file from the nearest geographical server will be downloaded.

3) Reduced network traffic - As the jQuery file is loaded from a CDN, this reduces the network traffic to your web server.

4) Parallelism benefit - There is a limitation on how many components can be downloaded in parallel. This limitation is per hostname. This can be resolved as different components loaded from different server.

Part 100 What if CDN is down
------------------------------------------
https://www.youtube.com/watch?v=6TBuenMLHck

There are several benefits of referencing a resource from a CDN.  A CDN is an external resource and beyond our control. So, what if, CDN is down? How can we fall back from CDN to use local copy of jQuery.


There is a window property to check that just after CDN download

<script type="text/javascript">
 window.jQuery || document.write('<script src="~/MVCDemo/Scripts/jquery.1.7.1.min.js">\x3C/script>')
</script>


\x3C is hexadecimal for <








------------------------------------------------------------------
Additional Notes

1) HTTP 503 Server Busy is Status code when server run out of available thread to serve the Client request.
2) Server has thread pool (size)
3) The maximum thread pool size been utilized is called as Thread Starvation
4) MVC asynchronous controller, help to stop Thread starvation. The Thread starvation problem can be solved by using asynchronous actions. Whenever an MVC action executed, they must execute asynchrounously. Synchronous tied up the Thread. Asynchrouns means thread is not hold up and thread will be returned to the pool.


public async Task<ActionResult> Index()
{
	return View(await db.Departments.ToListAsync());
}


public async Task<ActionResult> Details(int? id)
{

	if (id==null
	{
	return new HTTPStatusCodeResult(HttpStatusCode.BadRequest);
	}
	Department dept= await db.Departments.FindAsync(id);
	if Dept==null)
	{
	return HttpNotFound();
	}
	return View(dept);
}

The create a view for the details/id controller action method.
Create Async  CRUD operation for department table.

https://www.youtube.com/watch?v=hJ_V6pAm0PE


5) Thread.Sleep(10000) to stop execution to 10 seconds
6) Visual Studio Load Test
7) How to use LoadTest/WebTest using Visual Studio 2088/2010?


8) Use [ValidateAntiForgeryToken] attribute for security

9) Async, await. Many methods do not immediately return. A method may need to query an external source. This takes timeand other code could run.
With async and await, we formalize and clarify how asynchronous, non-blocking methods begin and end. An async method can return only void or a Task.
Task:
A Task returns no value (it is void). A Task<int> returns an element of type int. This is a generic type.

Note:
An async method will be run synchronously if it does not contain the await keyword.

The return type is Task in case it was void and Task<T> where T is the return type of method.



What is Task?
Task is simply an implementation to IAsynchResult.

Now when a method returns Task<T> then it is awaitable and that means you can call it using the keyword await, and that means whenever you call it using await, the execution control will come back to you immediately and there will be no impact on the responsiveness of your application.





-> Non-Abstract class can not have abstract members
-> Normal class can have Virtual members to override them inside their child classes
-> Abstract class public (normal) properties can not be called in child classes using base.PropertyName. 	
	-You must mark them virtual.
	- Abstract member are not accessed using base
	- Warning if you define abstrat method body
	- 
- Use override (overriding) or new (hiding) if you redefine in derived classes



-> cannot instantiate the Abstract class.
-> Object of abstract class can be created and instantiated with constructor of derived class
 Quadrilaterals q = new Rectangle();

-> Parent class can be initialize with the constructor of the child class
? Yes
   - If you override the method then method/properties of the child class will be       referenced
   - If not overridden inside the child class, methods/properties of the base 	class will be called


-> Derived class can not be initialize with the constructor of the base class

   Implicit conversion not possible, explicit conversion required.


  
















AngularJS
https://goo.gl/WMhWbF



